const lista=document.querySelector("#lista"),adicionar=document.querySelector("#adicionar"),comentario=document.querySelector("#comentario"),salvarLista=document.querySelector("#salvarLista"),carregarLista=document.querySelector("#carregarLista"),apagarListaSalva=document.querySelector("#apagarListaSalva"),salvoComentario=document.querySelector("#salvoComentario"),inserir=document.querySelector("#inserir");let t,itemGenerico,localItem,btnApagar,listaParseada,afazerAmarelo,arrayDeItems=[];localStorage.getItem("listaDeAfazeres")&&(arrayDeItems=JSON.parse(localStorage.getItem("listaDeAfazeres")));const riscar=function(a){let b=document.getElementById(`cb-${a}`),c=document.getElementById(`li-${a}`);b.checked=arrayDeItems[a][2],b.checked&&c.classList.toggle("line-through"),b.addEventListener("change",()=>{let b=arrayDeItems.findIndex((b,c)=>c===a);c.classList.toggle("line-through"),arrayDeItems[b][2]=!arrayDeItems[b][2],localStorage.setItem("listaDeAfazeres",JSON.stringify(arrayDeItems))})},geraUmLi=function(a,b,c){!b||(itemGenerico=document.createElement("li"),itemGenerico.id=`li-${c}`,itemGenerico.classList.add("flex","justify-between","items-center","h-12","shadow-md","bg-gray-50","m-2","border-2","border-transparent","hover:border-yellow-500","rounded-lg"),itemGenerico.innerHTML=`
        <input id="cb-${c}" type="checkbox" class="m-2 h-6 w-6" aria-label="concluir item"/>
        <span>${b}</span>
        <button class="block w-10 h-10 btnApagar hover:gray-500 group" aria-label="deletar item" onclick="apagaLi(${c})" value='${arrayDeItems.length}'>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="fill-current">
         <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" class="h-6 w-6 fill-current text-yellow-300 group-hover:text-yellow-500" />
        </svg>
        </button>`,a.appendChild(itemGenerico),riscar(c))},inicializar=function(){if(lista.innerHTML="",0<arrayDeItems.length)for(i=0;i<arrayDeItems.length;i++)geraUmLi(lista,arrayDeItems[i][0],i);else;};inicializar();const apagaLi=function(a){confirm("Voc\xEA tem certeza que desja excluir o item?")&&(arrayDeItems=arrayDeItems.filter((b,c)=>c!==a),localStorage.setItem("listaDeAfazeres",JSON.stringify(arrayDeItems)),inicializar())};function botoes(a,b){if(b){let c=Date.now();arrayDeItems.push([b,c,!1]),localStorage.setItem("listaDeAfazeres",JSON.stringify(arrayDeItems)),geraUmLi(lista,b,arrayDeItems.length-1),inserir.value="",botaoFunciona(a,!0,"")}else botaoFunciona(a,!1,"Por favor, insira conte\xFAdo e tente novamente.")}function mensagemDeAviso(a,b){a?(comentario.classList.toggle("text-red-500",!1),comentario.classList.toggle("text-green-500",!0),comentario.textContent=b,setTimeout(()=>{comentario.textContent="",comentario.classList.toggle("text-green-500",!1)},4e3)):(comentario.classList.toggle("text-green-500",!1),comentario.classList.toggle("text-red-500",!0),comentario.textContent=b,setTimeout(()=>{comentario.textContent="",comentario.classList.toggle("text-red-500",!1)},4e3))}function botaoFunciona(a,b,c){b?(a.classList.toggle("bg-yellow-300",!1),a.classList.toggle("hover:bg-yellow-500",!1),a.classList.toggle("bg-green-500"),mensagemDeAviso(b,c),setTimeout(()=>{a.classList.toggle("bg-green-500"),a.classList.toggle("bg-yellow-300",!0),a.classList.toggle("hover:bg-yellow-500",!0)},300)):(a.classList.toggle("bg-yellow-300",!1),a.classList.toggle("hover:bg-yellow-500",!1),a.classList.toggle("bg-red-500"),mensagemDeAviso(b,c),setTimeout(()=>{a.classList.toggle("bg-red-500"),a.classList.toggle("bg-yellow-300",!0),a.classList.toggle("hover:bg-yellow-500",!0)},300))}afazerAmarelo=document.getElementById("afazerAmarelo"),inserir.addEventListener("focus",()=>{afazerAmarelo.classList.toggle("text-yellow-400",!0)}),inserir.addEventListener("blur",()=>{afazerAmarelo.classList.toggle("text-yellow-400",!1)}),adicionar.addEventListener("click",()=>{botoes(adicionar,inserir.value)}),inserir.addEventListener("keyup",a=>{"Enter"==a.key&&botoes(adicionar,inserir.value)}),apagarListaSalva.addEventListener("click",()=>{""===lista.innerHTML&&0===arrayDeItems.length&&null===localStorage.getItem("listaDeAfazeres")?botaoFunciona(apagarListaSalva,!1,"Sua lista est\xE1 vazia."):confirm("Voc\xEA tem certeza que deseja apagar toda a lista?")&&(localStorage.removeItem("listaDeAfazeres"),lista.innerHTML="",arrayDeItems=[],localStorage.clear(),botaoFunciona(apagarListaSalva,!0,"Lista apagada com sucesso!"))}),document.getElementById("nav-toggle").onclick=function(){document.getElementById("nav-content").classList.toggle("hidden")};